# 更新日志

## [Unreleased] - 2025-11-06

### 改进 ✨
- **重新设计 Composer UI**
  - 简化输入栏布局：从 4 个控件（模型选择器+输入框+图片按钮+发送按钮）简化为 3 个（加号按钮+输入框+发送按钮）
  - 解决 Android 端界面拥挤和被压缩的问题
  - 实现更简洁的界面设计

### 新增 🎉
- **附加功能菜单**
  - 点击加号按钮弹出底部功能菜单
  - 包含 9 个功能按钮：选择模型、照片、拍照、语音通话、视频通话、戳一戳、红包、位置、文件
  - 采用 4 列网格布局，易于扩展
  - 使用 Material Design BottomSheet 组件

- **模型选择器**
  - 从功能菜单打开的独立模型选择器
  - 显示所有可用 AI 模型列表
  - 当前选中模型显示 ✓ 标记
  - 支持滚动查看更多模型
  - 点击模型立即切换，自动关闭弹窗

### 技术改进 🔧
- 移除 AnimationController 和复杂的模型选择器浮层
- 使用更简单的 showModalBottomSheet API
- 清理未使用的导入（dart:math、app_settings.dart 部分依赖）
- 优化组件结构，提高代码可维护性

### 文档更新 📝
- 更新 `界面布局图.md` - 反映新的 Composer 设计
- 新增 `COMPOSER_UPDATE.md` - 详细说明 Composer 组件更新
- 更新 `README.md` - 添加文档索引部分
- 新增 `CHANGELOG.md` - 记录项目更新历史

### 待完成 🚧
- 实现照片选择功能（使用 image_picker）
- 实现拍照功能（使用 camera）
- 实现文件上传功能（使用 file_picker）
- 实现位置分享功能（使用 geolocator）
- 实现语音/视频通话功能
- 实现戳一戳和红包功能

---

## [Previous] - 之前版本

### 已实现功能
- 响应式布局（窄屏/宽屏模式自动切换）
- 联系人列表页面
- 聊天页面（消息气泡、消息列表）
- 设置页面（模型管理、参数配置）
- 个人中心页面（占位）
- 聊天设置页面（侧滑弹出）
- 底部导航栏（3个Tab）
- 双栏布局（宽屏模式）
- 模型选择功能
- 消息发送和接收
- TTS 音频播放
- API 集成（与 FastAPI 后端通信）

### 已知问题
- `前端说明.md` 文件存在编码问题，需要重新整理
- 部分功能按钮仅显示占位提示
- 多模态功能（图片、文件）尚未完全实现

---

## 版本说明

本项目遵循 [语义化版本控制](https://semver.org/lang/zh-CN/) 规范。

版本格式：主版本号.次版本号.修订号

- 主版本号：不兼容的 API 修改
- 次版本号：向下兼容的功能性新增
- 修订号：向下兼容的问题修正

## 贡献指南

如果你想为本项目贡献代码或文档，请确保：

1. 遵循项目的代码风格和架构设计
2. 为新功能编写相应的文档
3. 在 CHANGELOG.md 中记录你的更改
4. 提交 Pull Request 前进行充分测试

---

**最后更新**: 2025-11-06
**维护者**: Claude Code Assistant
