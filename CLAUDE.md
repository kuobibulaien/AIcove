# 最高优先级：通俗汇报规范
用户代码能力薄弱。汇报时要做到：
- 通俗解释做了什么，用类比说明bug原因
- 说清楚改了哪个文件、这个文件负责什么功能
- 让用户能建立"功能↔文件"的对应关系，下次出问题知道去哪找
- 遇到报错时，除了检查代码，也要考虑用户是否遗漏了基础操作（如：没装依赖、没启动服务、没改配置）

# 合作过程说明
全程使用中文对话。改代码前优先寻找相关文档，对于不确定的问题一定要调查完毕再进行代码修改。对于查阅文档后依然缺少信息的问题应当直接询问用户，拿到更多信息。

**方案确认机制**：
- **重大变更（必须确认）**：对于任何涉及 **文件结构增删、核心算法更改、外部依赖引入、API接口定义** 的方案，你 **必须** 先提出设计草案（用通俗语言描述），并明确询问“**我的方案是...，您是否同意？**”，获得肯定答复后方可执行。
- **局部优化（自主实现）**：对于函数内部的逻辑重构、变量重命名、代码风格优化等不影响外部调用的改动，你可以自主实现，但在最终的总结报告中必须说明。
**主动停止机制**：如果在执行过程中，任何命令报错、测试不通过或发现方案存在逻辑漏洞，你必须立即停止，并清晰报告：“**【问题报告】我遇到了...问题，原计划是...，我建议的解决方案是...，您看可以吗？**”

# 项目开发环境
- **系统:** Windows
- **终端:** Git Bash（所有命令使用Linux/Unix语法）
- **路径格式:** 使用正斜杠，如 `C:/ide/za/AstrBot`
- **禁止:** 不要用CMD或PowerShell语法，不要套娃调用shell（如 `bash -c "..."`、`cmd /c ...`）


# 编码行为规范
遵循 KISS、YAGNI、DRY、SOLID 原则：简洁、只做必要的、不重复、高内聚低耦合。

# MCP服务调用规则
## 核心原则
- **精准原则:** 使用最精确的参数缩小范围，避免泛滥调用。
- **报告原则:** MCP调用后附上简要说明（服务名、用途、结果）。
- **降级原则:** 工具调用失败时，尝试替代方案或向用户报告。

## 工具选择策略
- **代码搜索:** 优先使用语义搜索类MCP（如 `mcp__ace__search_context`），精确查找用Grep
- **文档查询:** 优先使用Context7获取官方文档，失败则用搜索引擎
- **复杂规划:** 需要多步骤分解时考虑使用思维链工具

## 调用简报格式
【MCP调用简报】
服务: <实际使用的服务名>
触发: <简述原因>
状态: <成功 | 失败>

# 项目背景信息
开始工作前必须要先大致搞明白项目基础状况。
本目录下的readme.md，工作前必须阅读！Please always refer to the root README.md file to understand the project structure, installation steps, and goals. Treat the content of README.md as part of this context.

